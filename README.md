# SQLDBTestCase
Описание базы
Для сущности "Магазин" создана таблица Store.
В таблице Store (и во всех других) добавлены дополнительные атрибуты IsActive, CreatedOn и UpdatedOn.
Атрибут IsActive показывает, что строка таблицы помечена как удаленная (это позволит избежать физического удаления, и в случае необходимости просмотреть информацию об удаленных объектах).
Атрибут CreatedOn показывает время создания записи, UpdatedOn - время последнего изменения записи.

Сущность "Дополнительные параметры магазина" реализована следующим образом:
Так как различные параметры могут повторяться для различных магазинов, то создана таблица AdditionalStoreParameter, в которой хранится информация о каждом отдельном параметре (его название, код и тип данных), 
а значение для параметра для отдельного магазина хранится в таблице-связке StoreAdditionalStoreParameterMapping.
Для заполнения таблица связки созданы процедуры UspSaveStoreAdditionalParameterValueDate, UspSaveStoreAdditionalParameterValueFloat, UspSaveStoreAdditionalParameterValueText, которые позволяют добавить значение параметра для
конкретного магазина, при этом контролируется существование магазина, существование параметра и соотвествие его типа. 
Типы данных хранится в таблице DataType.

Сущность "Товар" реализована в таблице Product.
Сущность "Дополнительные параметры товара" реализована с помощью двух таблиц AdditionalProductParameter и ProductAdditionalProductParameterMapping аналогично сущности "Дополнительные параметры магазина".
Аналогично созданы процедуры заполнения UspSaveProductAdditionalParameterValueDate, UspSaveProductAdditionalParameterValueFloat, UspSaveProductAdditionalParameterValueText для заполнения значений.

Сущность "Средний объем товара по ценовым диапазонам" реализована с помощью представления AverageProductVolume.
Диапазоны цен хранятся в таблице PriceRange. Хранение диапазонов делает создание представления более простым, а так же позволяет без изменения кода представления менять количество диапазонов, а так же их границы.

Сущность "Продажи" реализована с помощью двух таблиц:
В таблице Sale хранится информация о том, когда и в каком магазине была совершена продажа.
В таблице SaleDetail хранится информация о том, что было куплено и в каком объеме.
Такая структура позволяет хранить информацию о продаже, в результате которой было куплено несколько товаров.

Сущность "Продажи за месяц" реализована в виде представления SaleTotal.

Так же добавлены скрипты инициализации: для таблиц DataType и PriceRange.
Кроме того в скрипте FillDatabase выполняется заполнение базы данных тестовой информацией. Данных скрипт выполняется, если в базе ещё нет данных (формальным признаком считается отсутствие данных в таблице Store).
